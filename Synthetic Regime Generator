import pandas as pd
import numpy as np
from datetime import datetime, timedelta

def generate_mock_data(rows=5000):
    print("Real data not detected. Generating synthetic market regimes for demonstration...")
    start_time = datetime(2025, 1, 1, 13, 30) # Start at NY Open
    times = [start_time + timedelta(seconds=i*5) for i in range(rows)]
    
    # Simulate a trending "Artificial Spot Price"
    returns = np.random.normal(0.00001, 0.0005, rows)
    spot_prices = 450 * (1 + returns).cumprod()
    
    df = pd.DataFrame({
        'S': spot_prices,
        'returns': returns,
        'avg_spread': np.random.uniform(0.01, 0.03, rows),
        'math_stress_z': np.random.normal(0, 1, rows),
        'specialist_state': np.random.choice([0, 1, 3], rows),
        'is_news_noise': False
    }, index=pd.to_datetime(times))
    
    return df

# Try to load real data, fallback to synthetic
try:
    df = pd.read_parquet('MATH_SIGNALS_FULL_YEAR.parquet')
except Exception:
    df = generate_mock_data()
